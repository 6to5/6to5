# @babel/helper-caching

## Usage

The objective of this helper is to create an object that Babel can use as
a unique identifier the current running logic of a plugin. The result object can
be stringified with @@toPrimitive. The cache key contract is intentionally kept
simple in order to allow users to pass cache keys that they maintain without
having to pull in this whole module if they want to manage their cache keys
using their own logic somehow.

Using of this helper in Babel's own plugins is script-generated in order to
keep things maintainable in our monorepo. For third-party plugins, the API is
fairly simple.

The "cacheKey" object generated by this API has a simple API

* `.inspect()` - JSON output to make debugging the key easier.
* `.toString()` - Generate a SHA representing the key's content.

with the goal of example usage being `${cackeKey}` to convert the key into
a string when it is ready for use. The string is generated lazily in order
to avoid slowdowns for startup time, and to in general avoid unnecessary work.

### Simple plugins

For a simple transfor plugin with no transformation-related dependencies:

```js
import helperCaching from "@babel/helper-caching";

const cacheKey = helperCaching("plugin-name", "plugin-version");

// Pass 'cacheKey' to Babel when running your plugin.
```

For a more complete example, you might expect your plugin to do

```js
import helperCaching from "@babel/helper-caching";
import { name, version } from "./package.json";

const cacheKey = helperCaching(name, version);
```

or you could of course avoid the runtime parsing of `package.json` by
scripting your package publishing logic to update the version automatically.

### Complex plugins

If your plugin has dependencies on either Babel's core helpers, or other
packages that export utility logic, you'll wa

Explicitly importing the dependency key:

```js
import helperModuleImports, { CACHE_KEY } from "@babel/helper-module-imports";

import helperCaching from "@babel/helper-caching";

const cacheKey = helperCaching("name", "version", [
  CACHE_KEY,
]);
```

Importing the dependency namespace:

```js
import * as helperModuleImports from "@babel/helper-module-imports";

import helperCaching from "@babel/helper-caching";

const cacheKey = helperCaching("name", "version", [
  helperModuleImports,
]);
```
